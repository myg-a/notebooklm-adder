# NotebookLM Adder

ブラウザのページやリンクをGoogle NotebookLMに簡単にインポートするChrome拡張機能です。

## 機能

### 主要機能
1. **現在のページをインポート** - 閲覧中のWebページをNotebookLMにワンクリックで追加
2. **リンク一括インポート** - ページ内のリンクを選択して複数まとめてインポート
3. **新しいノートブック作成** - 拡張機能から直接新しいノートブックを作成

### 追加機能
- オーディオ概要の自動生成オプション
- ドメインフィルタリング設定
- インポート履歴の管理
- 設定の永続化

## インストール

### 開発環境でのセットアップ

1. リポジトリをクローン
```bash
git clone <repository-url>
cd notebooklm-adder
```

2. 依存関係をインストール
```bash
npm install
```

3. ビルド
```bash
npm run build
```

4. Chrome拡張機能として読み込み
   - Chrome拡張機能管理ページ（chrome://extensions/）を開く
   - 「デベロッパーモード」を有効にする
   - 「パッケージ化されていない拡張機能を読み込む」をクリック
   - このプロジェクトのフォルダを選択

### 本番用パッケージ作成

```bash
npm run package
```

## 使用方法

### 初回設定
1. Chrome拡張機能をインストール後、ツールバーのアイコンをクリック
2. NotebookLMにログインしていることを確認
3. 認証が自動的に設定されます

### 基本的な使い方

#### 現在のページをインポート
1. インポートしたいWebページを開く
2. 拡張機能アイコンをクリック
3. 「現在のページ」タブで対象のノートブックを選択
4. 「インポート」ボタンをクリック

#### リンクを一括インポート
1. リンクが含まれるページを開く
2. 拡張機能アイコンをクリック
3. 「ページ内リンク」タブに切り替え
4. インポートしたいリンクを選択
5. 「選択したリンクをインポート」ボタンをクリック

#### 新しいノートブック作成
1. 拡張機能を開く
2. 「新しいノートブック作成」タブに切り替え
3. ノートブック名を入力
4. 「作成」ボタンをクリック

## 技術仕様

### アーキテクチャ
- **Manifest V3** Chrome拡張機能
- **TypeScript** 型安全な開発
- **TDD（テスト駆動開発）** 高品質な実装
- **内部API** NotebookLMの内部RPCエンドポイントを使用

### 主要コンポーネント
- **Popup** - メインユーザーインターフェース
- **Content Script** - Webページからのリンク抽出
- **Background Script** - 認証とバックグラウンド処理
- **NotebookLM Client** - API通信処理

### ファイル構成
```
notebooklm-adder/
├── manifest.json         # 拡張機能マニフェスト
├── popup.html           # ポップアップHTML
├── src/
│   ├── api/            # NotebookLM API クライアント
│   ├── popup/          # ポップアップ UI コンポーネント
│   ├── content/        # コンテンツスクリプト
│   ├── background/     # バックグラウンドスクリプト
│   └── utils/          # Chrome API ユーティリティ
├── tests/              # テストファイル
├── dist/               # ビルド出力
└── icons/              # 拡張機能アイコン
```

## 開発

### 開発モード
```bash
npm run dev  # ファイル変更を監視してビルド
```

### テスト実行
```bash
npm test     # 全テストを実行
```

### ビルド
```bash
npm run build     # 本番用ビルド
npm run package   # 配布用パッケージ作成
```

## トラブルシューティング

### よくある問題

#### 認証エラー
- NotebookLMにログインしていることを確認
- Chromeを再起動して再試行
- 拡張機能を無効/有効化して再設定

#### リンクが抽出されない
- ページが完全に読み込まれてから実行
- JavaScript無効サイトでは動作しない場合があります
- コンテンツセキュリティポリシーによる制限の可能性

#### インポートが失敗する
- NotebookLMのサービス状況を確認
- ネットワーク接続を確認
- 一度に大量のリンクをインポートする場合は分割して実行

### サポート
問題が解決しない場合は、Issueを作成してください。

## ライセンス

MIT License

## 開発履歴

このプロジェクトは、テスト駆動開発（TDD）手法を用いて開発されました：

1. **要件定義** - ユーザーインタビューによる機能要件の整理
2. **API調査** - NotebookLMの内部APIの解析
3. **テスト作成** - 実装前にテストケースを作成
4. **実装** - テストをパスする最小限の実装
5. **リファクタリング** - コード品質の向上
6. **統合テスト** - 全体的な動作確認

### テスト戦略
- **単体テスト** - 各コンポーネントの個別機能
- **統合テスト** - コンポーネント間の連携
- **E2Eテスト** - ユーザーシナリオ全体